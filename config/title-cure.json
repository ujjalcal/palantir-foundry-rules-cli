{
  "$schema": "./workflow-schema.json",
  "version": "1.0.0",
  "workflow": {
    "name": "Title Cure Rules Workflow",
    "workflowRid": "ri.taurus.main.workflow.f4c74a0a-583c-4499-aba3-1989b7f0a273",
    "objectType": {
      "id": "hvznujj5.title-cure",
      "dynamicLookup": false,
      "properties": [
        { "id": "exceptionCategory", "type": "string", "description": "Category of title exception (insurance, liens, easements, etc.)" },
        { "id": "cureType", "type": "string", "description": "Type of cure action (lien, doc, name, structural)" },
        { "id": "riskLevel", "type": "string", "description": "Risk level (low, medium, high)" },
        { "id": "band", "type": "integer", "description": "Processing band (1, 2, or 3)" },
        { "id": "status", "type": "string", "description": "Status (new, in_progress, cleared)" },
        { "id": "matchedRuleId", "type": "string", "description": "Matched Fannie Mae rule ID" }
      ]
    },
    "output": {
      "id": "821a6877-c5bf-43c9-9bc4-bc967ef518b4",
      "version": "0.1.0",
      "parameters": [
        { "id": "approval_status", "type": "string", "defaultValue": "pending" },
        { "id": "priority", "type": "string", "defaultValue": "normal" },
        { "id": "auto_process", "type": "boolean", "defaultValue": false }
      ]
    }
  },
  "foundry": {
    "url": "https://ujjal-test.usw-23.palantirfoundry.com",
    "ontologyRid": "ri.ontology.main.ontology.a0e4fce1-dea7-4947-84bd-9f67d37a508e",
    "tokenEnvVar": "FOUNDRY_TOKEN"
  },
  "sdk": {
    "packageName": "@title-review-app/sdk",
    "archetypes": {
      "proposal": "FoundryRulesProposalObjectArchetypeId1_7",
      "rule": "FoundryRulesRuleObjectArchetypeId1_7"
    },
    "actions": {
      "createProposal": "foundry-rules-create-add-proposal-1-1",
      "approveProposal": "foundry-rules-approve-add-proposal-1-1",
      "rejectProposal": "foundry-rules-reject-proposal-1-1",
      "editProposal": "foundry-rules-edit-proposal-1-1"
    }
  },
  "validation": {
    "grammarVersion": "V1",
    "supportedStrategyTypes": ["filterNode", "windowNode", "aggregationNode"],
    "supportedStringFilters": ["EQUALS", "CONTAINS", "MATCHES", "EQUALS_WITH_WILDCARDS"],
    "unsupportedStringFilters": ["REGEX", "STARTS_WITH", "ENDS_WITH"],
    "supportedNumericFilters": ["EQUALS", "GREATER_THAN", "LESS_THAN", "GREATER_THAN_OR_EQUAL", "LESS_THAN_OR_EQUAL"],
    "supportedNullFilters": ["NULL", "NOT_NULL"]
  },
  "conventions": {
    "proposalIdPrefix": "PROP-TITLE-CURE-",
    "ruleIdPrefix": "RULE-TITLE-CURE-",
    "defaultAuthor": "proposal-cli-v2",
    "defaultDescription": "Created via CLI from Fannie Mae Selling Guide",
    "defaultKeywords": "title-cure,fannie-mae"
  },
  "templates": [
    { "name": "exception-category", "file": "../prompts/templates/string-equals.json", "description": "Filter by exception category (insurance, liens, etc.)" },
    { "name": "cure-type", "file": "../prompts/templates/string-equals.json", "description": "Filter by cure type (lien, doc, name, structural)" },
    { "name": "risk-level", "file": "../prompts/templates/string-equals.json", "description": "Filter by risk level (low, medium, high)" }
  ]
}
